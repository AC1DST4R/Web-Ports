<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Drive - Google Drive</title>

<meta name="apple-mobile-web-app-title" content="Web Port Game Launcher">
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="icon" sizes="16x16" href="Favicons/favicon-16x16.png">
<link rel="icon" sizes="32x32" href="Favicons/favicon-32x32.png">
<link rel="apple-touch-icon" sizes="180x180" href="Favicons/180x180.png">

<style>
body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #0f0f12;
    color: white;
    overflow: hidden;
}

h1 {
    text-align: center;
    margin: 1rem 0;
}

/* ===== INPUT INDICATOR ===== */
#inputIndicator {
    position: fixed;
    top: 10px;
    left: 10px;
    width: 32px;
    height: 32px;
    z-index: 100;
}

/* ===== CAROUSEL ===== */
.carousel {
    position: absolute;
    bottom: 30px;  
    left: 0;
    width: 100%;
    display: flex;
    align-items: center;
    overflow: hidden;
    height: 400px;
}

.track {
    display: flex;
    gap: 2rem;
    transition: transform 0.4s ease;
    will-change: transform;
}

.arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 3rem;
    cursor: pointer;
    user-select: none;
    opacity: 0.6;
    z-index: 10;
}

#prev { left: 0; }
#next { right: 0; }

.arrow:hover { opacity: 1; }

/* ===== GAME CARDS ===== */
.card {
    width: 220px;
    flex-shrink: 0;
    text-align: center;
    cursor: pointer;
    opacity: 0.4;
    transform: scale(0.9);
    transition: transform 0.25s ease, opacity 0.25s ease;
    position: relative;
}

.card.active {
    opacity: 1;
    transform: scale(1);
}

.card:hover:not(.active) {
    transform: scale(0.97);
    opacity: 0.7;
}

.card img {
    width: 100%;
    aspect-ratio: 3 / 4;
    object-fit: cover;
    border-radius: 8px;
    background: #222;
}

/* ===== GAME TITLE SLIDE ===== */
.title {
    font-size: 0.9rem;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 0.25rem 0;
    text-align: center;
    transform: translateY(100%);
    opacity: 0;
    transition: transform 0.35s cubic-bezier(0.25,1,0.5,1), opacity 0.35s ease;
    border-radius: 0 0 8px 8px;
}

.card:hover .title,
.card.active .title {
    transform: translateY(0);
    opacity: 1;
}

/* ===== DETAILS VIEW ===== */
.details {
    display: none;
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.85);
    justify-content: center;
    align-items: center;
    gap: 2rem;
    padding: 2rem;
}

.details.active { display: flex; }

.details-left img {
    width: 300px;
    aspect-ratio: 3 / 4;
    object-fit: cover;
    border-radius: 12px;
}

.details-right h2 { margin: 0; }
.details-right p { margin-top: 1rem; max-width: 500px; }

button {
    margin-top: 1rem;
    padding: 0.6rem 1.5rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.back { background: #444; color: white; }
.play { background: #22c55e; color: black; font-weight: bold; }

/* ===== WARNING MODAL ===== */
#warningModal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    color: white;
    display: none; /* start hidden */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 9999;
    padding: 2rem;
}

#warningModal p {
    max-width: 500px;
    margin-bottom: 2rem;
    font-size: 1rem;
}

#warningModal a { color: #22c55e; }

#warningModal button { margin: 0 0.5rem; }
</style>
</head>

<body>

<h1>ðŸŽ® Web-Ports</h1>

<div id="inputIndicator"></div>

<div class="carousel" id="carousel">
    <div class="arrow" id="prev">&lt;</div>
    <div class="track" id="track"></div>
    <div class="arrow" id="next">&gt;</div>
</div>

<div class="details" id="details">
    <div class="details-left">
        <img id="detailImg">
        <button class="back" id="backBtn">Back</button>
    </div>
    <div class="details-right">
        <h2 id="detailTitle"></h2>
        <p id="detailDesc"></p>
        <button class="play" id="playBtn">Play</button>
    </div>
</div>

<!-- MOBILE / CONTROLLER WARNING MODAL -->
<div id="warningModal">
    <p id="warningText"></p>
    <div style="display: flex; gap: 1rem; margin-top: 1rem;">
        <button id="understandBtn">I Understand</button>
        <button id="goBackBtn">Go Back</button>
    </div>
</div>

<script>
const BASE_URL = "https://ac1dst4r.github.io/Web-Ports/";
const USER = "AC1DST4R";
const REPO = "Web-Ports";

const games = [
  "Amanda the Adventurer",
  "Andy's Apple Farm",
  "Baldi's Basics Plus",
  "Baldi's Basics Remastered",
  "Bendy",
  "Bloodmoney",
  "Buckshot Roulette",
  "Dead Plate",
  "Deltatraveler",
  "Don't Take This Cat Home",
  "Getting Over It",
  "Happy Sheepies",
  "Hotline Miami",
  "Omori",
  "Pizza Tower",
  "Raft",
  "Sonic",
  "That's Not My Neighbor",
  "The Man In The Window",
  "Undertale Yellow",
  "Webfishing"
];

const exts = ["png","jpg","jpeg"];
const track = document.getElementById("track");
const carousel = document.getElementById("carousel");
const details = document.getElementById("details");
const inputIndicator = document.getElementById("inputIndicator");
const modal = document.getElementById('warningModal');
const warningText = document.getElementById('warningText');
const understandBtn = document.getElementById('understandBtn');
const goBackBtn = document.getElementById('goBackBtn');
let current = 0;
let axisCooldown = 0;
let usingGamepad = false;

/* ===== DESCRIPTIONS ===== */
const descriptions = {
  "Amanda the Adventurer": "Join Amanda and her pal Wooly on a series of adventures as they explore and learn about our wonderful world! Solve puzzles and interact with characters that may be watching you back.",
  "Andy's Apple Farm": "Play minigames and discover the hidden truth in this retroâ€‘style horror game set on Andyâ€™s apple farm. Navigate eerie farm environments and uncover the secrets buried beneath the idyllic countryside.",
  "Baldi's Basics Plus": "Baldiâ€™s BasicsÂ® Plus is an active stealth roguelike that parodies cheap â€™90s edutainment with a subtle horror twist! Collect notebooks while avoiding Baldi and experience randomized levels, strange characters, and unpredictable events.",
  "Baldi's Basics Remastered": "[PLACEHOLDER]",
  "Bendy": "[PLACEHOLDER]",
  "Bloodmoney": "[PLACEHOLDER]",
  "Buckshot Roulette": "[PLACEHOLDER]",
  "Dead Plate": "[PLACEHOLDER]",
  "Deltatraveler": "[PLACEHOLDER]",
  "Don't Take This Cat Home": "[PLACEHOLDER]",
  "Getting Over It": "[PLACEHOLDER]",
  "Happy Sheepies": "[PLACEHOLDER]",
  "Hotline Miami": "High-octane top-down action game overflowing with raw brutality and intense close combat. Complete missions against the local mafia using a mix of melee and ranged weapons.",
  "Omori": "Explore a strange world full of colorful friends and foes. Navigate vibrant locations to uncover a forgotten past, discovering how your choices affect your fate.",
  "Pizza Tower": "[PLACEHOLDER]",
  "Raft": "[PLACEHOLDER]",
  "Sonic": "[PLACEHOLDER]",
  "That's Not My Neighbor": "[PLACEHOLDER]",
  "The Man In The Window": "[PLACEHOLDER]",
  "Undertale Yellow": "[PLACEHOLDER]",
  "Webfishing": "[PLACEHOLDER]"
};

/* ===== INPUT ICONS ===== */
const icons = {
    keyboard: `<svg width="32" height="32" viewBox="0 0 64 64" fill="white">
        <rect x="4" y="16" width="56" height="32" rx="4" stroke="white" stroke-width="2" fill="none"/>
        <rect x="8" y="20" width="4" height="4" fill="white"/>
        <rect x="16" y="20" width="4" height="4" fill="white"/>
        <rect x="24" y="20" width="4" height="4" fill="white"/>
        <rect x="32" y="20" width="4" height="4" fill="white"/>
    </svg>`,
    gamepad: `<svg width="32" height="32" viewBox="0 0 64 64" fill="white">
        <rect x="8" y="24" width="48" height="16" rx="8" fill="none" stroke="white" stroke-width="2"/>
        <circle cx="20" cy="32" r="2" fill="white"/>
        <circle cx="28" cy="32" r="2" fill="white"/>
        <circle cx="44" cy="30" r="2" fill="white"/>
        <circle cx="48" cy="34" r="2" fill="white"/>
    </svg>`
};
function showInput(type){ inputIndicator.innerHTML = icons[type]||''; }

/* ===== BUILD CARDS ===== */
games.forEach((name,index)=>{
    const card = document.createElement("div");
    card.className = "card";

    const img = document.createElement("img");
    let e = 0;
    function loadImg() {
        if(e >= exts.length) return;
        img.src = `https://raw.githubusercontent.com/${USER}/${REPO}/main/Cover%20Art/${index+1}.${exts[e++]}`;
    }
    img.onerror = loadImg;
    loadImg();

    const title = document.createElement("div");
    title.className = "title";
    title.textContent = name;

    card.appendChild(img);
    card.appendChild(title);
    track.appendChild(card);

    card.onclick = ()=>{ current = index; openDetails(); update(); };
});

/* ===== CAROUSEL UPDATE ===== */
function update(){
    const cards = document.querySelectorAll(".card");
    cards.forEach((c,i)=>c.classList.toggle("active", i===current));
    const w = cards[0].offsetWidth + 32;
    track.style.transform = `translateX(${window.innerWidth/2 - w/2 - current*w}px)`;
}

/* ===== ARROWS ===== */
document.getElementById("prev").onclick = ()=>{ if(current>0){current--;update();} };
document.getElementById("next").onclick = ()=>{ if(current<games.length-1){current++;update();} };

/* ===== KEYBOARD NAV ===== */
document.addEventListener("keydown", e=>{
    if(details.classList.contains("active")){
        if(e.key==="Escape") closeDetails();
        return;
    }
    if(e.key==="ArrowLeft" && current>0){ current--; update(); showInput("keyboard"); }
    if(e.key==="ArrowRight" && current<games.length-1){ current++; update(); showInput("keyboard"); }
    if(e.key==="Enter") openDetails();
});
document.addEventListener("mousemove", ()=>{ if(usingGamepad){ usingGamepad=false; showInput("keyboard"); } });

/* ===== DETAILS VIEW ===== */
function openDetails(){
    const gameName = games[current];
    details.classList.add("active");
    carousel.style.display = "none";
    document.getElementById("detailTitle").textContent = gameName;
    document.getElementById("detailDesc").textContent = descriptions[gameName] || "[PLACEHOLDER]";
    document.getElementById("detailImg").src = document.querySelectorAll(".card img")[current].src;
    document.getElementById("playBtn").onclick = ()=>{
        window.location.href = BASE_URL + encodeURIComponent(gameName) + "/";
    };
}
function closeDetails(){
    details.classList.remove("active");
    carousel.style.display = "flex";
}
document.getElementById("backBtn").onclick = closeDetails;

/* ===== GAMEPAD SUPPORT ===== */
function pollGamepad() {
    const gamepads = navigator.getGamepads();
    if (!gamepads) return;

    for (let gp of gamepads) {
        if (!gp) continue;

        if(!usingGamepad){ usingGamepad=true; showInput("gamepad"); }

        const xAxis = gp.axes[0] || 0;

        if (axisCooldown <= 0) {
            if (xAxis < -0.5 && current>0) { current--; update(); axisCooldown = 12; }
            else if (xAxis > 0.5 && current<games.length-1) { current++; update(); axisCooldown = 12; }
        } else { axisCooldown--; }

        if (gp.buttons[0].pressed) {
            if (!details.classList.contains("active")) openDetails();
            else document.getElementById("playBtn").click();
        }

        if (gp.buttons[1].pressed && details.classList.contains("active")) {
            closeDetails();
        }
    }

    requestAnimationFrame(pollGamepad);
}
window.addEventListener("gamepadconnected", e=>{
    console.log("Gamepad connected:", e.gamepad);
    pollGamepad();
});

/* ===== WARNING MODAL ===== */
function isMobile() { return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent); }
function checkController() {
    const gps = navigator.getGamepads();
    if (!gps) return false;
    return Array.from(gps).some(gp => gp);
}

function showWarning() {
    let show = false;
    if(isMobile()){
        warningText.innerHTML = "These games are generally made for PC and we wouldn't recommend playing on mobile.";
        understandBtn.style.display = "inline-block";
        goBackBtn.style.display = "inline-block";
        show = true;
    } else if(checkController()){
        warningText.innerHTML = `All games are unverified for controller use. Some games may work, while others may not. This is still an early stage of development. If you find no controller support on a certain game, please fill out an issue report on <a href="https://github.com/AC1DST4R/Web-Ports/issues" target="_blank">GitHub</a>.`;
        understandBtn.style.display = "inline-block";
        goBackBtn.style.display = "none";
        show = true;
    }
    if(show) modal.style.display = "flex";
}

understandBtn.onclick = ()=>{ modal.style.display="none"; };
goBackBtn.onclick = ()=>{ window.history.back(); };

window.addEventListener('load', showWarning);
window.addEventListener("gamepadconnected", ()=>{ if(!isMobile()) showWarning(); });

/* ===== INITIALIZATION ===== */
showInput("keyboard");
window.onload = update;
window.onresize = update;
</script>

</body>
</html>
